{"version":3,"file":"commonHelpers.js","sources":["../src/img/bi_x-octagon.png","../src/js/render-functions.js","../src/js/pixabay-api.js"],"sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFpSURBVHgBrZQ9UsMwEIXXQoZhcgCobU6RNKlygPTOKUhPDz00UOBbpE9OgX0FD8xQkBAbrYkyirQrK3Fe5bHX79Nqf6JqPG6AUJzN4DLLIETr/B02eU5+kz7z39UK6uIDfBLpnYqdtc8URLLmiwX8PD1CkO7nLET2NlfSsRRE9jXvgshzmPsg0mcu0lQVufCa2jE2ROhuccyTFK6fX1R2fKvi4TBGJImTCXoiROALqhXrsmhTxCAKojPfqBmoy9L9f+dJzoEWDpCZri6cab5mBkzLC6AgAFGweRCAgoSaowQEqmGeuxSUgXnn/1fE756jAVxBQyHyFHOuu1gADpUtfOfrFhOyXS6dWcA1joq+X9+a+IyrAnWl1recTNrDXcy/Ph8iVbh4OgVxcwtbNeJaTVVBl+wY0xwzl2a6eiWculFtc9S+yH0hlPkBoA+EM3cADmQwaLeqT9gtcjhku42cgwPIaARd8u2mP6EkDQvp61kkAAAAAElFTkSuQmCC\"","// ----library iziToast----\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport closeIcon from '../img/bi_x-octagon.png';\n\n// ----library simpleLigthbox----\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { refs } from \"./pixabay-api\";\n\n// ----Markup HTML----\n export function renderPhoto(hits) {\n    const markup = hits\n        .map(({ largeImageURL, webformatURL, tags, likes, views, comments, downloads }) =>\n            `<li class='gallery-item'>\n             <a class='gallery-link' href='${largeImageURL}'>\n               <img class='gallery-image' src='${webformatURL}' alt='${tags}'/>\n             </a>\n             <div class='container-app'>\n              <p><span>Likes</span> ${likes}</p>\n              <p><span>Views</span> ${views}</p>\n              <p><span>Comments</span> ${comments}</p>\n              <p><span>Downloads</span> ${downloads}</p>\n             </div>\n            </li>`)\n        .join('');\n    refs.list.insertAdjacentHTML('beforeend', markup);\n}\n\n// ----SmoothScroll----\nexport function smoothScroll() {\n    const { height: itemHeight } = document.querySelector('.gallery-item').getBoundingClientRect();\n    window.scrollBy({\n    top: itemHeight*2,\n    behavior: 'smooth',\n  });\n}\n\n// ----No request photos---- \nexport function noPhotos(hits){\n    if (hits.length === 0) {\n        iziToast.error({\n            messageColor: '#FFF',\n            color: '#EF4040',\n            iconUrl: closeIcon,\n            position: 'topRight',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n        });\n        }; \n}\n\n// ---- Add 'Load more' button-----\nexport function addLoadButton(totalHits,perPage) {\n   const totalPages = Math.ceil(totalHits / perPage);     \n    if (totalPages>1) {\n       refs.loadButton.classList.remove('hidden'); \n    };\n     \n}\n\n// ---- The end of the collection----\nexport function endOfCollection(page, totalHits, perPage) {\n    const totalPages = Math.ceil(totalHits / perPage);\n    if (page>=totalPages) {\n        observer.observe(refs.list.lastChild);\n        refs.loadButton.classList.add('hidden'); \n    } else {\n        observer.unobserve(refs.list.lastChild);\n    } \n}\n\n// ---- Add observer----\nconst observer = new IntersectionObserver(onLastPage);\nfunction onLastPage(entries,observer) {\n    entries.forEach((entry) => {\n        if (entry.isIntersecting) {\n            iziToast.error({\n                position: \"topRight\",\n                messageColor: '#FFF',\n                color: '#EF4040',\n                iconUrl: closeIcon,\n                message: \"We're sorry, but you've reached the end of search results\"\n            });\n        }\n    });\n   \n}\n\n// ----Library SimpleLightbox----\nlet gallery = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionsPosition: 'bottom',\n    captionDelay: 250,\n});\n export function simpleLightbox(){\n    gallery.on('show.simpleLightbox');\n    gallery.refresh();\n}\n","\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport closeIcon from '../img/bi_x-octagon.png';\nimport axios from \"axios\";\nimport { renderPhoto } from \"./render-functions\";\nimport { smoothScroll } from \"./render-functions\";\nimport { noPhotos } from \"./render-functions\";\nimport { addLoadButton } from \"./render-functions\";\nimport { endOfCollection } from \"./render-functions\";\nimport { simpleLightbox } from \"./render-functions\";\n\n\nexport const refs = {\n    form: document.querySelector('form'),\n    list: document.querySelector('.gallery'),\n    spanLoader: document.querySelector('.loader'),\n    loadButton: document.querySelector('.load-button'),\n    input: document.querySelector('.form-input')\n}\n\nlet page = 1;\nlet inputSearch = '';\nlet perPage = 15;\n\n// ----Request function----\nexport async function getPhotos() {\n    refs.spanLoader.classList.remove('hidden');\n    const response = await axios.get( 'https://pixabay.com/api/',{\n        params: {\n            key: \"31960717-8c82352157f13e8057b3011e3\",\n            q: `${inputSearch}`,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: \"true\",\n            per_page: perPage,\n            page: page},\n    });\n    const {hits, totalHits } = response.data;\n    refs.spanLoader.classList.add('hidden');\n    return {hits, totalHits};\n}\n\n// ----Add an event handler for the \"Load more\" button----\nrefs.loadButton.addEventListener('click', onLoadMoreButton);\n\n// ----Add an event handler for the \"Search\" button----\nrefs.form.addEventListener('submit', onSearchButton);\n\n// ----Event Searching photos----\nasync function onSearchButton(e){\n    e.preventDefault();\n    inputSearch  = refs.input.value.trim();\n    refs.list.innerHTML = '';\n    refs.loadButton.classList.add('hidden');\n    if (inputSearch === '') {\n        return iziToast.error({\n            messageColor: '#FFF',\n            color: '#EF4040',\n            iconUrl: closeIcon,\n            position: 'topRight',\n            message: 'Please,enter what do you want to find!',\n        });\n    };\n    page = 1;\n    try {\n        const { hits, totalHits } = await getPhotos();\n        noPhotos(hits);\n        renderPhoto(hits);\n        addLoadButton(totalHits,perPage);\n    }\n    catch (error) {\n        iziToast.error({\n            messageColor: '#FFF',\n            color: '#EF4040',\n            iconUrl: closeIcon,\n            position: 'topRight',\n            message: `${error}`,\n        })\n    } \n    simpleLightbox();\n    refs.form.reset(); \n}\n\n// ----Event Loading photos----\n async function onLoadMoreButton() {  \n    page++;\n    try {\n        const {hits, totalHits} = await getPhotos();\n        renderPhoto(hits);\n        endOfCollection(page, totalHits, perPage);\n    }\n    catch (error) {\n        console.log(error);\n        iziToast.error({\n                messageColor: '#FFF',\n                color: '#EF4040',\n                iconUrl: closeIcon,\n                position: 'topRight',\n                message: `${error}`,\n            })\n     };\n    smoothScroll();\n    simpleLightbox();\n}\n"],"names":["closeIcon","renderPhoto","hits","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","refs","smoothScroll","itemHeight","noPhotos","iziToast","addLoadButton","totalHits","perPage","endOfCollection","page","totalPages","observer","onLastPage","entries","entry","gallery","SimpleLightbox","simpleLightbox","inputSearch","getPhotos","response","axios","onLoadMoreButton","onSearchButton","error"],"mappings":"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"}